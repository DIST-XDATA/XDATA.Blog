<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            WebPack4入门 | 
        
        DIST.XDATA Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/XDATA.Blog/img/favicon.png">
    <link rel="icon" href="/XDATA.Blog/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="Webpack4及模块绑定入门手册
本文在我们的书《现代JavaScript工具和技能》中有所介绍。 让我们一起熟悉支持现代JavaScript开发的基本工具。">
    <meta name="keywords" content="Web XDATA,WebPack">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/XDATA.Blog/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/XDATA.Blog/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/XDATA.Blog/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/XDATA.Blog/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/XDATA.Blog/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/XDATA.Blog/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="DIST.XDATA Blog">
    <meta name="msapplication-starturl" content="https://dist-xdata.github.io/XDATA.Blog/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="DIST.XDATA Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/XDATA.Blog/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://dist-xdata.github.io/XDATA.Blog/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="WebPack4入门 | DIST.XDATA Blog">
    <meta property="og:image" content="/XDATA.Blog/img/favicon.png">
    <meta property="og:description" content="Webpack4及模块绑定入门手册
本文在我们的书《现代JavaScript工具和技能》中有所介绍。 让我们一起熟悉支持现代JavaScript开发的基本工具。">
    <meta property="og:article:tag" content="WebPack"> 

    
        <meta property="article:published_time" content="Tue Jul 10 2018 10:20:05 GMT+0800">
        <meta property="article:modified_time" content="Tue Jul 10 2018 10:18:58 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://dist-xdata.github.io/XDATA.Blog/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://dist-xdata.github.io/XDATA.Blog/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/index.html",
    "headline": "WebPack4入门",
    "datePublished": "Tue Jul 10 2018 10:20:05 GMT+0800",
    "dateModified": "Tue Jul 10 2018 10:18:58 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "XDATA",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "Hi, nice to meet you"
    },
    "publisher": {
        "@type": "Organization",
        "name": "DIST.XDATA Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",WebPackWeb XDATA",
    "description": "Webpack4及模块绑定入门手册
本文在我们的书《现代JavaScript工具和技能》中有所介绍。 让我们一起熟悉支持现代JavaScript开发的基本工具。",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开始"><span class="post-toc-number">1.</span> <span class="post-toc-text">开始</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模块"><span class="post-toc-number">2.</span> <span class="post-toc-text">模块</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#装载"><span class="post-toc-number">3.</span> <span class="post-toc-text">装载</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Sass"><span class="post-toc-number">4.</span> <span class="post-toc-text">Sass</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JS中的样式表"><span class="post-toc-number">5.</span> <span class="post-toc-text">JS中的样式表</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#图片"><span class="post-toc-number">6.</span> <span class="post-toc-text">图片</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#依赖图-Dependency-Graph"><span class="post-toc-number">7.</span> <span class="post-toc-text">依赖图 Dependency Graph</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#代码拆分"><span class="post-toc-number">8.</span> <span class="post-toc-text">代码拆分</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#插件"><span class="post-toc-number">9.</span> <span class="post-toc-text">插件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#产品"><span class="post-toc-number">10.</span> <span class="post-toc-text">产品</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#拆分CSS"><span class="post-toc-number">11.</span> <span class="post-toc-text">拆分CSS</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#生成HTML"><span class="post-toc-number">12.</span> <span class="post-toc-text">生成HTML</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#发展"><span class="post-toc-number">13.</span> <span class="post-toc-text">发展</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#HotModuleReplacement"><span class="post-toc-number">14.</span> <span class="post-toc-text">HotModuleReplacement</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CSS替换"><span class="post-toc-number">15.</span> <span class="post-toc-text">CSS替换</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#HTTP-2"><span class="post-toc-number">16.</span> <span class="post-toc-text">HTTP/2</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#给你的话"><span class="post-toc-number">17.</span> <span class="post-toc-text">给你的话</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/XDATA.Blog/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                WebPack4入门
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/XDATA.Blog/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>XDATA</strong>
        <span>7月 10, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="https://pan.baidu.com/share/qrcode?w=246&h=246&url=https://dist-xdata.github.io/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/XDATA.Blog/tags/WebPack/">WebPack</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=WebPack4入门&url=https://dist-xdata.github.io/XDATA.Blog/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/index.html&pic=https://dist-xdata.github.io/XDATA.Blog/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=DIST.XDATA Blog&title=WebPack4入门&summary=&pics=https://dist-xdata.github.io/XDATA.Blog/img/favicon.png&url=https://dist-xdata.github.io/XDATA.Blog/XDATA.Blog/2018/07/10/WEBPACK/Webpack4及模块绑定入门手册/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p><a href="https://www.sitepoint.com/beginners-guide-webpack-module-bundling/" target="_blank" rel="noopener">Webpack4及模块绑定入门手册</a></p>
<p>本文在我们的书《现代JavaScript工具和技能》中有所介绍。 让我们一起熟悉支持现代JavaScript开发的基本工具。</p>
<a id="more"></a>
<p>Webpack4 文档中说到：</p>
<blockquote>
<p>Webpack是一个module bundler。 它的主要目的是捆绑JavaScript文件以便在浏览器中使用，但它也能够转换，捆绑或打包任何资源。</p>
</blockquote>
<p>Webpack已成为现代Web开发最重要的工具之一。 它主要是JavaScript的module bundler，但它可以用来转换所有前端资源，如HTML，CSS，甚至图像。 它可以让您更好地控制应用程序正在进行的HTTP请求的数量，并允许您使用其他类型的这些资源（例如，Pug，Sass和ES8）。 Webpack还允许您轻松地从npm使用包。</p>
<p>本文面向那些刚接触Webpack的人，将介绍初始设置和配置，模块，加载器（loaders），插件，代码拆分和热模块更换。 如果您发现视频教程很有帮助，我强烈推荐Glen Maddern的<strong>Webpack from First Principles</strong> 作为起点，了解Webpack的特殊之处。 它现在有点旧了，但原则仍然相同，这是一个很好的介绍。</p>
<p>要在家中进行操作，您需要安装Node.js. 您也可以从我们的GitHub仓库下载演示应用程序。</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>让我们用npm初始化一个新项目并安装webpack和webpack-cli：</p>
<pre><code>mkdir webpack-demo &amp;&amp; cd webpack-demo
npm init -y
npm install --save-dev webpack webpack-cli
</code></pre><p>接下来我们将创建下面文件结构和内容：</p>
<pre><code>webpack-demo
|- package.json
|- webpack.config.js
|- /src
 |- index.js
|- /dist
 |- index.html
</code></pre><p>dist/index.html</p>
<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello Webpack&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>src/index.js</p>
<pre><code>const root = document.createElement(&quot;div&quot;)
root.innerHTML = `&lt;p&gt;Hello Webpack.&lt;/p&gt;`
document.body.appendChild(root)
</code></pre><p>webpack.config.js</p>
<pre><code>const path = require(&#39;path&#39;)

module.exports = {
  entry: &#39;./src/index.js&#39;,
  output: {
    filename: &#39;bundle.js&#39;,
    path: path.resolve(__dirname, &#39;dist&#39;)
  }
}
</code></pre><p>这告诉Webpack在我们的入口点<strong>src / index.js</strong>中编译代码并在<strong>/dist/bundle.js</strong>中输出一个bundle。 我们来添加一个用于运行Webpack的npm脚本。</p>
<p>package.json</p>
<pre><code> {
    ...
    &quot;scripts&quot;: {
     &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
     &quot;develop&quot;: &quot;webpack --mode development --watch&quot;,
     &quot;build&quot;: &quot;webpack --mode production&quot;
    },
    ...
  }
</code></pre><p>使用npm run develop命令，我们可以创建我们的第一个包！</p>
<pre><code>Asset      Size      Chunks           Chunk Names
bundle.js  2.92 KiB  main  [emitted]  main
</code></pre><p>您现在应该可以在浏览器中加载dist / index.html并看到“Hello Webpack”。</p>
<p>打开<strong>dist / bundle.js</strong>以查看Webpack的功能。 顶部是Webpack的模块引导代码，底部是我们的模块。 你可能对此还没有很深刻的印象，但是如果你已经走到这一步，你现在可以开始使用ES模块，而Webpack将能够生成一个适用于所有浏览器的生产包。</p>
<p>使用Ctrl + C重新编译并运行npm run build以在生产模式下编译我们的bundle。</p>
<pre><code>Asset      Size       Chunks           Chunk Names
bundle.js  647 bytes  main  [emitted]  main
</code></pre><p>请注意，捆绑包大小已从2.92 KiB降至647字节。</p>
<p>再看一下<strong>dist / bundle.js</strong>，你会看到一堆丑陋的代码。 我们的软件包已经用UglifyJS缩小了：代码将运行完全相同，但它是以尽可能小的文件大小完成的。</p>
<ul>
<li><ul>
<li><strong>模式开发</strong>优化了构建速度和调试</li>
</ul>
</li>
<li><ul>
<li><strong>模式生产</strong>优化了运行时的执行速度和输出文件大小。</li>
</ul>
</li>
</ul>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>使用ES模块，您可以将大型程序拆分为许多小型自包含程序。</p>
<p>创造性地，Webpack知道如何使用导入和导出语句来使用ES模块。 举个例子，让我们现在通过安装lodash-es并添加第二个模块来尝试这个：</p>
<pre><code>npm install --save-dev lodash-es
</code></pre><p>src/index.js</p>
<pre><code>import { groupBy } from &quot;lodash-es&quot;
import people from &quot;./people&quot;

const managerGroups = groupBy(people, &quot;manager&quot;)

const root = document.createElement(&quot;div&quot;)
root.innerHTML = `&lt;pre&gt;${JSON.stringify(managerGroups, null, 2)}&lt;/pre&gt;`
document.body.appendChild(root)
</code></pre><p>src/people.js</p>
<pre><code>const people = [
  {
    manager: &quot;Jen&quot;,
    name: &quot;Bob&quot;
  },
  {
    manager: &quot;Jen&quot;,
    name: &quot;Sue&quot;
  },
  {
    manager: &quot;Bob&quot;,
    name: &quot;Shirley&quot;
  }
]

export default people
</code></pre><p>运行<strong>npm run develop</strong>启动Webpack并刷新<strong>index.html</strong>。 您应该看到按管理器分组的一组人员打印到屏幕上。</p>
<p>注意：导入一个像<strong><em>‘es-lodash’</em></strong>这样没有相对路径的模块，是从npm安装到 node_modules的模块。 你自己的模块总是需要一个像<strong><em>‘./people’</em></strong>这样的相对路径，因此你可以区分它们。</p>
<p>请注意，在控制台中我们的捆绑包大小已增加到<strong>1.41 MiB</strong>！ 这值得关注，但在这种情况下，没有理由担心。 使用<strong>npm run build</strong>在生产模式下编译，lodash-es中的所有未使用的lodash模块都将从bundle中删除。 删除未使用的导入的过程称为tree-shaking，并且是Webpack免费获得的。</p>
<pre><code>&gt; npm run develop

Asset      Size      Chunks                  Chunk Names
bundle.js  1.41 MiB  main  [emitted]  [big]  main


&gt; npm run build

Asset      Size      Chunks        Chunk Names
bundle.js  16.7 KiB  0  [emitted]  main
</code></pre><h2 id="装载"><a href="#装载" class="headerlink" title="装载"></a>装载</h2><p>加载程序允许您在导入文件时运行预处理程序。 这允许您将静态资源捆绑到JavaScript之外，但让我们看看在首先加载<strong>.js</strong>模块时可以做些什么。</p>
<p>让我们通过下一代JavaScript转换器Babel运行所有<strong>.js</strong>文件来保持代码的现代化：</p>
<pre><code>npm install --save-dev &quot;babel-loader@^8.0.0-beta&quot; @babel/core @babel/preset-env
</code></pre><p>webpack.config.js</p>
<pre><code>const path = require(&#39;path&#39;)

  module.exports = {
    entry: &#39;./src/index.js&#39;,
    output: {
      filename: &#39;bundle.js&#39;,
      path: path.resolve(__dirname, &#39;dist&#39;)
    },
   module: {
     rules: [
       {
         test: /\.js$/,
         exclude: /(node_modules|bower_components)/,
         use: {
           loader: &#39;babel-loader&#39;,
         }
       }
     ]
   }
  }
</code></pre><p>.babelrc</p>
<pre><code>{
  &quot;presets&quot;: [
    [&quot;@babel/env&quot;, {
      &quot;modules&quot;: false
    }]
  ],
  &quot;plugins&quot;: [&quot;syntax-dynamic-import&quot;]
}
</code></pre><p>此配置可防止Babel将导入和导出语句转换为ES5，并启用动态导入，这个我们将在后面的“代码拆分”一节中介绍。</p>
<p>我们现在可以自由使用现代语言功能，它们将被编译为在所有浏览器中运行的ES5。</p>
<h2 id="Sass"><a href="#Sass" class="headerlink" title="Sass"></a>Sass</h2><p>Loaders可以链接在一起进行一系列变换。 从我们的JavaScript导入Sass可以较好地演示它是如何工作的：</p>
<pre><code>npm install --save-dev style-loader css-loader sass-loader node-sass
</code></pre><p>webpack.config.js</p>
<pre><code> module.exports = {
...
module: {
  rules: [
    ...
       {
         test: /\.scss$/,
         use: [{
           loader: &#39;style-loader&#39;
         }, {
           loader: &#39;css-loader&#39;
         }, {
           loader: &#39;sass-loader&#39;
         }]
       }
      ]
    }
  }
</code></pre><p>这些加载器以相反的顺序处理:</p>
<ul>
<li>sass-loader将Sass转换为CSS。</li>
<li>css-loader将CSS解析为JavaScript并解析任何依赖项。</li>
<li>style-loader将我们的CSS输出到文档中的&lt;style>标记中。</li>
</ul>
<p>您可以将这些视为函数调用。 一个加载器的输出作为输入提供给下一个：</p>
<pre><code>styleLoader(cssLoader(sassLoader(&quot;source&quot;)))
</code></pre><p>让我们添加一个Sass源文件，import是一个模块。</p>
<p>src/style.scss</p>
<pre><code>$bluegrey: #2b3a42;

pre {
  padding: 8px 16px;
  background: $bluegrey;
  color: #e1e6e9;
  font-family: Menlo, Courier, monospace;
  font-size: 13px;
  line-height: 1.5;
  text-shadow: 0 1px 0 rgba(23, 31, 35, 0.5);
  border-radius: 3px;
}
</code></pre><p>src/index.js</p>
<pre><code>import { groupBy } from &#39;lodash-es&#39;
import people from &#39;./people&#39;

import &#39;./style.scss&#39;

  ...
</code></pre><p>使用Ctrl + C和npm run develop重新启动构建。 在浏览器中刷新index.html，您应该看到一些样式。</p>
<h2 id="JS中的样式表"><a href="#JS中的样式表" class="headerlink" title="JS中的样式表"></a>JS中的样式表</h2><p>我们刚从JavaScript中导入了一个Sass文件作为模块。</p>
<p>打开dist / bundle.js并搜索“pre {”。 实际上，我们的Sass已被编译为一串CSS并在我们的包中保存为模块。 当我们将这个模块导入JavaScript时，style-loader将字符串输出到嵌入的&lt;style>标记中。</p>
<p>你为什么需要做这样的事？</p>
<p>我不会在这里深入研究这个主题，但这里有几个理由需要考虑：</p>
<ul>
<li>您可能希望包含在项目中的JavaScript组件可能依赖于其他资源才能正常运行（HTML，CSS，图像，SVG）。 如果这些都可以捆绑在一起，则导入和使用起来要容易得多。</li>
<li>消除Dead code：当代码不再导入JS组件时，也不再导入CSS。 生成的包只会包含执行某些操作的代码。</li>
<li>CSS模块：CSS的全局命名空间使得很难确信对CSS的更改不会产生任何副作用。 CSS模块通过设置CSS默认本地并显示您可以在JavaScript中引用的唯一类名来解决该问题。</li>
<li>通过巧妙的方式捆绑/拆分代码来减少HTTP请求的数量。</li>
</ul>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p>我们将看到的最后一个加载器示例是使用文件加载器处理图像。</p>
<p>在标准HTML文档中，当浏览器遇到img标记或具有background-image属性的元素时，将获取图像。 使用Webpack，您可以在小图像的情况下通过将图像源作为字符串存储在JavaScript中来优化它。 通过执行此操作，您可以预加载它们，浏览器不必在以后使用单独的请求获取它们：</p>
<pre><code>npm install --save-dev file-loader
</code></pre><p>webpack.config.js</p>
<pre><code>module.exports = {
    ...
    module: {
      rules: [
        ...
       {
         test: /\.(png|svg|jpg|gif)$/,
         use: [
           {
             loader: &#39;file-loader&#39;
           }
         ]
       }
      ]
    }
  }
</code></pre><p>用以下命令下载一个测试图像：</p>
<pre><code>    curl https://raw.githubusercontent.com/sitepoint-editors/webpack-demo/master/src/code.png --output src/code.png
</code></pre><p>使用Ctrl + C和npm run develop重新启动构建，您现在可以将图像作为模块导入！</p>
<p>src/index.js</p>
<pre><code>import { groupBy } from &#39;lodash-es&#39;
import people from &#39;./people&#39;

import &#39;./style.scss&#39;
import &#39;./image-example&#39;

  ...
</code></pre><p>src/image-example.js</p>
<pre><code>import codeURL from &quot;./code.png&quot;

const img = document.createElement(&quot;img&quot;)
img.src = codeURL
img.style = &quot;background: #2B3A42; padding: 20px&quot;
img.width = 32
document.body.appendChild(img)
</code></pre><p>这将包括一个图像，其中src属性包含图像本身的数据URI：</p>
<pre><code>&lt;img src=&quot;data:image/png;base64,iVBO...&quot; style=&quot;background: #2B3A42; padding: 20px&quot; width=&quot;32&quot;&gt;
</code></pre><p>我们的CSS中的背景图像也由文件加载器处理。</p>
<p>src/style.scss</p>
<pre><code>$bluegrey: #2b3a42;

  pre {
    padding: 8px 16px;
    background: $bluegrey;
    background: $bluegrey url(&quot;code.png&quot;) no-repeat center center / 32px 32px;
    color: #e1e6e9;
    font-family: Menlo, Courier, monospace;
    font-size: 13px;
    line-height: 1.5;
    text-shadow: 0 1px 0 rgba(23, 31, 35, 0.5);
    border-radius: 3px;
  }
</code></pre><p>在文档中查看更多Loaders示例：</p>
<ul>
<li><a href="https://webpack.js.org/guides/asset-management/#loading-fonts" target="_blank" rel="noopener">加载字体</a></li>
<li><a href="https://webpack.js.org/guides/asset-management/#loading-data" target="_blank" rel="noopener">加载数据</a></li>
</ul>
<h2 id="依赖图-Dependency-Graph"><a href="#依赖图-Dependency-Graph" class="headerlink" title="依赖图 Dependency Graph"></a>依赖图 Dependency Graph</h2><p>您现在应该能够看到加载器如何帮助您在资源中构建依赖关系树。 这就是Webpack主页上的图像所展示的内容。</p>
<p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png" alt=""></p>
<p>尽管JavaScript是切入点，但Webpack明白您的其他资源类型（如HTML，CSS和SVG）各自具有自己的依赖关系，这应该被视为构建过程的一部分。</p>
<h2 id="代码拆分"><a href="#代码拆分" class="headerlink" title="代码拆分"></a>代码拆分</h2><p>Webpack文档中写到：</p>
<blockquote>
<p>代码拆分是Webpack最引人注目的功能之一。 此功能允许您将代码拆分为各种捆绑包，然后可以按需或并行加载。 它可用于实现更小的捆绑并控制资源负载优先级，如果使用得当，可能会对加载时间产生重大影响。</p>
</blockquote>
<p>到目前为止，我们只看到了一个入口点 - <strong>src / index.js</strong> - 和一个输出包 - dist / bundle.js。 当您的应用程序增长时，您需要将其拆分，以便在开始时不会下载整个代码库。 一种好的方法是使用Code Splitting和Lazy Loading来按需获取内容，因为代码路径需要它们。</p>
<p>我们通过添加一个“聊天”模块来证明这一点，该模块在有人与之交互时被提取和初始化。 我们将创建一个新的入口点并为其命名，我们还将使输出的文件名动态，因此每个块的不同。</p>
<p>webpack.config.js</p>
<pre><code> const path = require(&#39;path&#39;)

  module.exports = {
   entry: &#39;./src/index.js&#39;,
   entry: {
     app: &#39;./src/app.js&#39;
   },
   output: {
     filename: &#39;bundle.js&#39;,
     filename: &#39;[name].bundle.js&#39;,
     path: path.resolve(__dirname, &#39;dist&#39;)
    },
    ...
  }
</code></pre><p>src/app.js</p>
<pre><code>import &#39;./app.scss&#39;

const button = document.createElement(&quot;button&quot;)
button.textContent = &#39;Open chat&#39;
document.body.appendChild(button)

button.onclick = () =&gt; {
  import(/* webpackChunkName: &quot;chat&quot; */ &quot;./chat&quot;).then(chat =&gt; {
    chat.init()
  })
}
</code></pre><p>src/chat.js</p>
<pre><code>import people from &quot;./people&quot;

export function init() {
  const root = document.createElement(&quot;div&quot;)
  root.innerHTML = `&lt;p&gt;There are ${people.length} people in the room.&lt;/p&gt;`
  document.body.appendChild(root)
}
</code></pre><p>src/app.scss</p>
<pre><code>button {
  padding: 10px;
  background: #24b47e;
  border: 1px solid rgba(#000, .1);
  border-width: 1px 1px 3px;
  border-radius: 3px;
  font: inherit;
  color: #fff;
  cursor: pointer;
  text-shadow: 0 1px 0 rgba(#000, .3), 0 1px 1px rgba(#000, .2);
}
</code></pre><p>注意：尽管<em>/ </em> webpackChunkName <em> /</em> comment为包提供了名称，但此语法不是特定于Webpack的。 它是动态导入的建议语法，旨在直接在浏览器中支持。</p>
<p>我们运行npm run build并查看它生成的内容：</p>
<pre><code>Asset           Size       Chunks        Chunk Names
chat.bundle.js  377 bytes  0  [emitted]  chat
app.bundle.js   7.65 KiB   1  [emitted]  app
</code></pre><p>由于我们的条目包已经更改，我们还需要更新它的路径。</p>
<p>dist/index.html</p>
<pre><code>&lt;!doctype html&gt;
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;Hello Webpack&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;app.bundle.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
  &lt;/html&gt;
</code></pre><p>我们从dist目录启动一个服务器，看看这个实际应用：</p>
<pre><code>cd dist
npx serve
</code></pre><p>在浏览器中打开<a href="http://localhost:5000，看看会发生什么。" target="_blank" rel="noopener">http://localhost:5000，看看会发生什么。</a> 最初只获取bundle.js。 单击该按钮时，将导入并初始化聊天模块。<br><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/03/1521906882lazy-loading.png" alt=""></p>
<p>只需很少的工作，我们就可以在我们的应用程序中添加动态代码拆分和延迟加载模块。 这是构建高性能Web应用程序的一个很好的起点。</p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>当加载器对单个文件进行转换时，插件可以在更大的代码块上运行。</p>
<p>现在我们正在打包代码，外部模块和静态资产，我们的包将会迅速增长。 插件可以帮助我们以巧妙的方式分割代码并优化生产。</p>
<p>在不知情的情况下，我们实际上已经使用了许多默认的Webpack插件“模式”</p>
<p>发展</p>
<ul>
<li>提供process.env.NODE_ENV，其值为“development”</li>
<li>NamedModulesPlugin</li>
</ul>
<p>生产</p>
<ul>
<li>提供process.env.NODE_ENV，其值为“production”</li>
<li>UglifyJsPlugin</li>
<li>ModuleConcatenationPlugin</li>
<li>NoEmitOnErrorsPlugin</li>
</ul>
<h2 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h2><p>在添加其他插件之前，我们首先拆分我们的配置，以便我们可以应用特定于每个环境的插件。</p>
<p>将webpack.config.js重命名为webpack.common.js并添加用于开发和生产的配置文件。</p>
<pre><code>- |- webpack.config.js
+ |- webpack.common.js
+ |- webpack.dev.js
+ |- webpack.prod.js
</code></pre><p>我们将使用webpack-merge将我们的公共配置与特定于环境的配置相结合：</p>
<pre><code>npm install --save-dev webpack-merge
</code></pre><p>webpack.dev.js</p>
<pre><code>const merge = require(&#39;webpack-merge&#39;)
const common = require(&#39;./webpack.common.js&#39;)

module.exports = merge(common, {
  mode: &#39;development&#39;
})
</code></pre><p>webpack.prod.js</p>
<pre><code>const merge = require(&#39;webpack-merge&#39;)
const common = require(&#39;./webpack.common.js&#39;)

module.exports = merge(common, {
  mode: &#39;production&#39;
})
</code></pre><p>package.json</p>
<pre><code> &quot;scripts&quot;: {
    &quot;develop&quot;: &quot;webpack --watch --mode development&quot;,
    &quot;build&quot;: &quot;webpack --mode production&quot;
    &quot;develop&quot;: &quot;webpack --watch --config webpack.dev.js&quot;,
    &quot;build&quot;: &quot;webpack --config webpack.prod.js&quot;
   },
</code></pre><p>现在我们可以将特定于开发的插件添加到webpack.dev.js和webpack.prod.js中特定于生产的插件中。</p>
<h2 id="拆分CSS"><a href="#拆分CSS" class="headerlink" title="拆分CSS"></a>拆分CSS</h2><p>在使用ExtractTextWebpackPlugin捆绑生产时，最好将CSS与JavaScript分开。</p>
<p>当前的.scss加载器非常适合开发，所以我们将把它们从webpack.common.js移到webpack.dev.js中，并将ExtractTextWebpackPlugin添加到webpack.prod.js中。</p>
<pre><code>npm install --save-dev extract-text-webpack-plugin@4.0.0-beta.0
</code></pre><p>webpack.common.js</p>
<pre><code> ...
  module.exports = {
    ...
    module: {
      rules: [
        ...
-       {
-         test: /\.scss$/,
-         use: [
-           {
-             loader: &#39;style-loader&#39;
-           }, {
-             loader: &#39;css-loader&#39;
-           }, {
-             loader: &#39;sass-loader&#39;
-           }
-         ]
-       },
        ...
      ]
    }
  }
</code></pre><p>webpack.dev.js</p>
<pre><code>  const merge = require(&#39;webpack-merge&#39;)
+ const ExtractTextPlugin = require(&#39;extract-text-webpack-plugin&#39;)
  const common = require(&#39;./webpack.common.js&#39;)

  module.exports = merge(common, {
    mode: &#39;production&#39;,
    module: {
     rules: [
      {
         test: /\.scss$/,
         use: ExtractTextPlugin.extract({
           fallback: &#39;style-loader&#39;,
           use: [&#39;css-loader&#39;, &#39;sass-loader&#39;]
         })
       }
     ]
   },
   plugins: [
     new ExtractTextPlugin(&#39;style.css&#39;)
   ]
  })
</code></pre><p>我们来比较两个构建脚本的输出：</p>
<pre><code>&gt; npm run develop

Asset           Size      Chunks           Chunk Names
app.bundle.js   28.5 KiB  app   [emitted]  app
chat.bundle.js  1.4 KiB   chat  [emitted]  chat

&gt; npm run build

Asset           Size       Chunks        Chunk Names
chat.bundle.js  375 bytes  0  [emitted]  chat
app.bundle.js   1.82 KiB   1  [emitted]  app
style.css       424 bytes  1  [emitted]  app
</code></pre><p>现在CSS被从JavaScript包中提取出来用于生产，我们需要从我们的HTML &lt;link>到它。</p>
<p>dist/index.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
  &lt;html&gt;
    &lt;head&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;title&gt;Code Splitting&lt;/title&gt;
      &lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;script type=&quot;text/javascript&quot; src=&quot;app.bundle.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
  &lt;/html&gt;
</code></pre><p>这允许在浏览器中并行下载CSS和JavaScript，因此加载速度比单个捆绑包更快。 它还允许在JavaScript完成下载之前显示样式。</p>
<h2 id="生成HTML"><a href="#生成HTML" class="headerlink" title="生成HTML"></a>生成HTML</h2><p>每当我们的输出发生变化时，我们必须不断更新index.html以引用新的文件路径。 这正是html-webpack-plugin自动为我们创建的。</p>
<p>我们也可以在每次构建之前同时添加clean-webpack-plugin来清除/dist目录。</p>
<pre><code>npm install --save-dev html-webpack-plugin clean-webpack-plugin
</code></pre><p>webpack.common.js</p>
<pre><code> const path = require(&#39;path&#39;)
 const CleanWebpackPlugin = require(&#39;clean-webpack-plugin&#39;);
 const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);

  module.exports = {
    ...
   plugins: [
     new CleanWebpackPlugin([&#39;dist&#39;]),
     new HtmlWebpackPlugin({
       title: &#39;My killer app&#39;
     })
   ]
  }
</code></pre><p>现在每次我们建立时，dist都会被清除掉。 我们现在也会看到index.html输出，以及我们的入口包的正确路径。</p>
<p>运行npm run develop会产生以下结果：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;My killer app&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;app.bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>而npm run build产生了这个：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;My killer app&lt;/title&gt;
    &lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;app.bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><h2 id="发展"><a href="#发展" class="headerlink" title="发展"></a>发展</h2><p>webpack-dev-server为您提供了一个简单的Web服务器，并为您提供实时重新加载，因此您无需手动刷新页面即可查看更改。</p>
<pre><code>npm install --save-dev webpack-dev-server
</code></pre><p>package.json</p>
<pre><code>{
    ...
    &quot;scripts&quot;: {
     &quot;develop&quot;: &quot;webpack --watch --config webpack.dev.js&quot;,
     &quot;develop&quot;: &quot;webpack-dev-server --config webpack.dev.js&quot;,
    }
    ...
  }

&gt; npm run develop

 ｢wds｣: Project is running at http://localhost:8080/
 ｢wds｣: webpack output is served from /
</code></pre><p>在浏览器中打开<a href="http://localhost:8080/并对其中一个JavaScript或CSS文件进行更改。" target="_blank" rel="noopener">http://localhost:8080/并对其中一个JavaScript或CSS文件进行更改。</a> 您应该看到它自动构建和刷新。</p>
<h2 id="HotModuleReplacement"><a href="#HotModuleReplacement" class="headerlink" title="HotModuleReplacement"></a>HotModuleReplacement</h2><p>HotModuleReplacement插件比Live Reloading更进一步，并在运行时交换模块而无需刷新。 正确配置后，这可以节省开发单页应用程序的大量时间。 如果页面中有很多状态，则可以对组件进行增量更改，只更换和更新已更改的模块。</p>
<p>webpack.dev.js</p>
<pre><code>  const webpack = require(&#39;webpack&#39;)
  const merge = require(&#39;webpack-merge&#39;)
  const common = require(&#39;./webpack.common.js&#39;)

  module.exports = merge(common, {
    mode: &#39;development&#39;,
   devServer: {
     hot: true
   },
   plugins: [
     new webpack.HotModuleReplacementPlugin()
   ],
    ...
  }
</code></pre><p>现在我们需要从代码中接受更改的模块来重新初始化事物。</p>
<p>src/app.js</p>
<pre><code> if (module.hot) {
   module.hot.accept()
 }

  ...
</code></pre><p>注意：启用热模块替换时，module.hot设置为true以进行开发，false设置为生产，因此这些将从捆绑中剥离。</p>
<p>重新启动构建，看看执行以下操作时会发生什么：</p>
<ul>
<li>单击打开聊天</li>
<li>将新人添加到people.js模块</li>
<li>再次单击“打开聊天”</li>
</ul>
<p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/03/1521906879hmr.png" alt=""></p>
<p>这是发生了什么：</p>
<ol>
<li>单击“打开聊天”时，将获取并初始化chat.js模块</li>
<li>HMR检测perple.js何时被修改</li>
<li>index.js中的module.hot.accept（）会导致替换此条目块加载的所有模块</li>
<li>再次单击“打开聊天”时，将使用更新模块中的代码运行chat.init（）。</li>
</ol>
<h2 id="CSS替换"><a href="#CSS替换" class="headerlink" title="CSS替换"></a>CSS替换</h2><p>让我们将按钮颜色更改为红色，看看会发生什么：</p>
<pre><code>src/app.scss

  button {
    ...
   background: #24b47e;
   background: red;
    ...
  }
</code></pre><p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/03/1521906881hmr2.png" alt=""></p>
<p>现在我们可以看到我们的样式的即时更新，而不会丢失任何状态。这是一个大大改善的开发人员体验！感觉就像未来。</p>
<h2 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP/2"></a>HTTP/2</h2><p>使用像Webpack这样的module bundler的主要好处之一是它可以帮助您控制资源的构建方式，然后在客户端上获取，从而帮助您提高性能。多年来，连接文件以减少需要在客户端上进行的请求数量被认为是最佳实践。这仍然有效，但HTTP/2现在允许在单个请求中传递多个文件，因此连接不再是银弹。您的应用程序实际上可能会受益于单独缓存许多小文件。然后，客户端可以获取单个已更改的模块，而不必再次获取具有大部分相同内容的整个包。</p>
<p>Webpack的创建者Tobias Koppers撰写了一篇内容丰富的文章，解释了为什么捆绑仍然很重要，即使在HTTP/2时代也是如此。</p>
<p>在Webpack和HTTP / 2上阅读更多相关信息。</p>
<h2 id="给你的话"><a href="#给你的话" class="headerlink" title="给你的话"></a>给你的话</h2><p>我希望你已经发现Webpack的这个介绍很有帮助，并且能够开始使用它并产生很大的效果。可能需要一些时间来围绕Webpack的配置，加载器和插件，但了解这个工具如何工作将会有所回报。</p>
<p>Webpack 4的文档目前正在进行中，但实际上很好地组合在一起。我强烈建议您阅读概念和指南以获取更多信息。以下是您可能感兴趣的一些其他主题：</p>
<ul>
<li><a href="https://webpack.js.org/guides/development/#using-source-maps" target="_blank" rel="noopener">源地图开发</a></li>
<li><a href="https://webpack.js.org/guides/production/#source-mapping" target="_blank" rel="noopener">生产的源地图</a></li>
<li><a href="https://webpack.js.org/guides/caching/" target="_blank" rel="noopener">缓存破坏与散列文件名</a></li>
<li><a href="https://webpack.js.org/plugins/commons-chunk-plugin/#explicit-vendor-chunk" target="_blank" rel="noopener">拆分供应商包</a></li>
</ul>
<p>Webpack 4是您选择的module bundler吗？请在下面的评论中告诉我。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 gitcoment -->
<div id="gitment-comment">
    <!-- Gitment 评论框 -->
<div id="container"></div>
</div>
<style>
    #gitment-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    var gitment = new Gitment({
        id: 'Tue Jul 10 2018 10:20:05 GMT+0800', // 可选。默认为 location.href
        owner: 'Hertz9409',
        repo: 'Hertz9409.github.io',
        oauth: {
            client_id: '0d96b743114c3388ac0e',
            client_secret: '3afa368ace511a47ff0ce3d70cf389244470cd80',
        },
    })
    gitment.render('container')
</script>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/XDATA.Blog/2018/08/10/HEXO/Hexo配置完善/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/XDATA.Blog/2018/06/13/HEXO/How-To-Build-Personal-Blog-By-Hexo/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/XDATA.Blog/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/XDATA.Blog/img/avatar.png" alt="XDATA's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/XDATA.Blog/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/XDATA.Blog/archives/2018/10/">十月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/archives/2018/09/">九月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/archives/2018/08/">八月 2018<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/archives/2018/07/">七月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/archives/2018/06/">六月 2018<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/XDATA.Blog/categories/frontend/">frontend<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/categories/hexo/">hexo<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/categories/mobile/">mobile<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/categories/tools/">tools<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/XDATA.Blog/categories/webpack/">webpack<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/XDATA.Blog/about" title="About">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                About
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">10</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/DIST-XDATA" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2018&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>DIST.XDATA Blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/XDATA.Blog/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/XDATA.Blog/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/XDATA.Blog/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- Gitment -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/XDATA.Blog/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/XDATA.Blog/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
